#pragma once

#include <cstdint>

constexpr int      PWM_RESOLUTION   = 11;
constexpr uint32_t PWM_MAX_VAL = (1<<PWM_RESOLUTION) - 1;

constexpr int SINE_LUT_IDX_RESOLUTION_bit =  6;
constexpr int SINE_LUT_IDX_RESOLUTION     = 64;
constexpr int THETA_INT_RESOLUTION_bit    = 32;

inline uint8_t theta_int_to_lut_idx(uint32_t theta) {
	return (uint8_t)(theta>>(THETA_INT_RESOLUTION_bit-SINE_LUT_IDX_RESOLUTION_bit));
}
const uint32_t SIN_LOOKUP[SINE_LUT_IDX_RESOLUTION] = {
	0x03FF03FF, 0x04630463, 0x04C704C7, 0x05280528, 0x05870587, 0x05E105E1, 0x06380638, 0x06880688,
	0x06D306D3, 0x07160716, 0x07520752, 0x07860786, 0x07B107B1, 0x07D207D2, 0x07EB07EB, 0x07FA07FA,
	0x07FF07FF, 0x07FA07FA, 0x07EB07EB, 0x07D207D2, 0x07B107B1, 0x07860786, 0x07520752, 0x07160716,
	0x06D306D3, 0x06880688, 0x06380638, 0x05E105E1, 0x05870587, 0x05280528, 0x04C704C7, 0x04630463,
	0x03FF03FF, 0x039B039B, 0x03370337, 0x02D602D6, 0x02770277, 0x021D021D, 0x01C601C6, 0x01760176,
	0x012B012B, 0x00E800E8, 0x00AC00AC, 0x00780078, 0x004D004D, 0x002C002C, 0x00130013, 0x00040004,
	0x00000000, 0x00040004, 0x00130013, 0x002C002C, 0x004D004D, 0x00780078, 0x00AC00AC, 0x00E800E8,
	0x012B012B, 0x01760176, 0x01C601C6, 0x021D021D, 0x02770277, 0x02D602D6, 0x03370337, 0x039B039B
};
inline uint32_t sin_lut(uint32_t x) {
	uint8_t lut_idx = theta_int_to_lut_idx(x);
	return SIN_LOOKUP[lut_idx];
}
